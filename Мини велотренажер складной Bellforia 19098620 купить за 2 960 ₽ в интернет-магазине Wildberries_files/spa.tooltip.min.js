function ownKeys(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})),e.push.apply(e,s)}return e}function _objectSpread(i){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(e),!0).forEach(function(t){_defineProperty(i,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):ownKeys(Object(e)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(e,t))})}return i}function _defineProperty(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}!function(t){"use strict";t.views&&t.views.tags({tooltip:{dataBoundOnly:!0,onUpdate:!1,settings:{delay:500,dist:10},tooltipClass:"spa-tooltip",init:function(){var t;this.text=this.tagCtx.props.text,this.tmplData=this.tagCtx.props.tmplData,this.contentSlr=this.tagCtx.props.contentSlr,this.classList=(null===(t=this.tagCtx.props.classes)||void 0===t?void 0:t.split(" "))||[],this.tagCtx.props.hasOwnProperty("distance")&&(this.settings.dist=this.tagCtx.props.distance),this.tagCtx.props.hasOwnProperty("delay")&&(this.settings.delay=this.tagCtx.props.delay);var i=this.tagCtx.props.pos||"center top";this.posHorizontal=i.split(" ")[0],this.posVertical=i.split(" ")[1],this.linkedElMarkup=this.linkCtx.elem.innerHTML,this.rightCollision=this.tagCtx.props.rightCollision},render:function(){return this.linkedElMarkup},onBind:function(){this._bindEvents()},onUnbind:function(){this._destroy()},_bindEvents:function(){var i=this;"click"==this.tagCtx.props.trigger?this.linkCtx.elem.addEventListener("click",this._positionAt.bind(this)):(this.linkCtx.elem.addEventListener("mouseover",this._positionAt.bind(this)),this.linkCtx.elem.addEventListener("mousemove",this._positionAt.bind(this)),this.linkCtx.elem.addEventListener("mouseout",function(t){i.linkCtx.elem.contains(t.relatedTarget)||setTimeout(function(){i.insideTip||i._destroy()},i.settings.delay)}))},_destroy:function(){document.removeEventListener("click",this),this.tooltip&&document.body.removeChild(this.tooltip),this.tooltip=null},_getMarkup:function(){return this.contentSlr?{html:document.querySelector(this.contentSlr).innerHTML}:this.tagCtx.props.useBind&&this.tagCtx.content?((0,t.link[this.tagCtx.content.tmplName])(this.tooltip,this.tmplData,_objectSpread(_objectSpread({},this.tagCtx.props.tmplHelper),{},{close:this._destroy.bind(this)})),{bound:!0}):{html:this.tagCtx.content?this.tagCtx.content.render(this.tmplData,{helper:this.tagCtx.props.tmplHelper}):this.text}},handleEvent:function(t){"click"==t.type&&(this.linkCtx.elem.contains(t.target)||this.tooltip.contains(t.target)||this._destroy())},_positionAt:function(){var s=this;if(!this.tooltip){document.querySelectorAll("."+this.tooltipClass).forEach(function(t){var i;return null===(i=t.close)||void 0===i?void 0:i.call(t)}),this.tooltip=document.createElement("div"),this.tooltip.style.display="inline-block",this.tooltip.style.position="absolute",this.tooltip.style.zIndex="11111";var t=this._getMarkup();t.bound||(this.tooltip.innerHTML=t.html),this.tooltip.classList.add(this.tooltipClass),this.tooltip.classList.addMany(this.classList),this.tooltip.close=function(){return s._destroy()},"click"!=this.tagCtx.props.trigger&&(this.tooltip.addEventListener("mouseenter",function(){return s.insideTip=!0}),this.tooltip.addEventListener("mouseleave",function(){s.insideTip=!1,setTimeout(function(){s.insideTip||s._destroy()},s.settings.delay)})),"click"==this.tagCtx.props.trigger&&document.addEventListener("click",this),document.body.appendChild(this.tooltip);var i,e,o=this.linkCtx.elem.getBoundingClientRect(),n=function(t,i){if(s.tagCtx.props.alignBy){var e=s.linkCtx.elem.closest(s.tagCtx.props.alignBy);if(e)return parseInt(e.getBoundingClientRect()[i])}return parseInt(t)};switch(this.posHorizontal){case"left":i=parseInt(o.left)-this.settings.dist-this.tooltip.offsetWidth,parseInt(o.left)-this.tooltip.offsetWidth<0&&(i=this.settings.dist);break;case"right":i=o.right+this.settings.dist,parseInt(o.right)+this.tooltip.offsetWidth>document.documentElement.clientWidth&&(i=document.documentElement.clientWidth-this.tooltip.offsetWidth-this.settings.dist);break;case"alignleft":i=n(o.left,"left");break;case"alignright":i=n(o.right,"right")-this.tooltip.offsetWidth;break;default:case"center":i=parseInt(o.left)+(this.linkCtx.elem.offsetWidth-this.tooltip.offsetWidth)/2,parseInt(o.right)+this.tooltip.offsetWidth>document.documentElement.clientWidth&&(i=document.documentElement.clientWidth-this.tooltip.offsetWidth-this.settings.dist)}switch(this.posVertical){case"center":e=(parseInt(o.top)+parseInt(o.bottom))/2-this.tooltip.offsetHeight/2;break;case"bottom":e=parseInt(o.bottom)+this.settings.dist,parseInt(o.bottom)+this.tooltip.offsetHeight>document.documentElement.clientHeight&&(e=parseInt(o.top)-this.tooltip.offsetHeight-this.settings.dist);break;default:case"top":e=parseInt(o.top)-this.tooltip.offsetHeight-this.settings.dist}i=i<0?parseInt(o.left):i,e=e<0?parseInt(o.bottom)+this.settings.dist:e,this.tooltip.style.left=i+"px",this.tooltip.style.top=e+pageYOffset+"px"}}}})}(this.jQuery);