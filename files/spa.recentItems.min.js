!function(i){"use strict";i.views&&i.views.tags({recentItems:{mainElement:".recently-watched",dataBoundOnly:!0,template:'\n                <div class="recently-watched">\n                {^{if ~tag.recentItems.length > 0}}\n                    <div class="recently-watched-top">\n                        {{if ~tagCtx.props.title}}\n                        <h2 class="recently-watched-title">{{:~tagCtx.props.title}}</h2>\n                        {{/if}}\n                        {{if ~tagCtx.props.showAll}}\n                        <a class="see-all" href="/catalog/recent">{{: ~tag.localizer.viewAll}}</a>\n                        {{/if}}\n                    </div>\n                    <div class="i-goods-list">\n                        {^{for ~tag.recentItems}}\n                        <div class="goods">\n                            <div class="goods-info">\n                                <div class="goods-info-photo" data-link="{on ~tag.openItem}">\n                                    <img src="{{:~ImageUrl(cod1S, \'c246x328\', 1)}}" alt="">\n                                    {{if new}}\n                                    <span class="goods-info-status">NEW</span>\n                                    {{/if}}\n                                </div>\n                                {{if !isFail}}\n                                <div class="goods-info-details">\n                                    <div class="goods-info-details-price">\n                                        <span class="price-value">{{priceWithCurrencyV2:priceWithCouponAndDiscount false}}</span>\n                                        {{if price != priceWithCouponAndDiscount}}\n                                        <span class="price-old">{{priceWithCurrencyV2:price false}}</span>\n                                        {{/if}}\n                                        {{if sale > 0}}\n                                        <span class="price-discount">-{{:sale}}%</span>\n                                        {{/if}}\n                                        {{if ~wbSettings.showOldPrice && priceWithCouponAndDiscount > 0}}\n                                        <p class=\'price-localized\'>({{priceWithCurrencyLocalized:priceWithCouponAndDiscount}})</p>\n                                        {{/if}}\n                                    </div>\n                                    <div class="goods-info-details-name">{{>brand}} / {{>name}}</div>\n                                    {{if rating > 0 && rating <= 5}}\n                                    <div class="goods-info-details-star">\n                                        <div class="c-stars-line-lg star{{:rating}}"></div>\n                                        <span class="goods-info-details-star-value">{{:comments}}</span>\n                                    </div>\n                                    {{/if}}\n                                </div>\n                                {{/if}}\n                            </div>\n                        </div>\n                        {{/for}}\n                    </div>\n                {{/if}}\n                </div>',init:function(){this.ml=this.ctx.root.$moduleLoader||this.ctx.root.router.$moduleLoader,this.localizer=this.ctx.root.$localziation||this.ctx.root.router.$localziation},onAfterLink:function(){var t=this;this.ml.loadModuleAsync("recentItems").then(function(n){new n(t.mainElem[0],function(){t.ctx.root.$httpClient.fetchJSON("/spa/modules/recentitems",{method:"POST"}).then(function(n){wb.xnm.getGoodsForRecommend(n).then(function(n){i.observable(t.recentItems).refresh(n)}).catch(function(n){})})}).showWhenInViewPortAsync()})},onUpdate:!1,recentItems:[],openItem:function(n,t){var i=this,e=t.view.data;this.ml.loadModuleAsync("productCardPopup").then(function(n){if(i.tagCtx.props.analiticsCode){var t=i.recentItems.findIndex(function(n){return n.cod1S==e.cod1S});i.ctx.root.$analitic.saveState({l:i.tagCtx.props.analiticsCode,iid:t})}new n(n.data,n.template).show(e.cod1S,null,null,null,null,"RG")})}}})}(this.jQuery);