!function(u){"use strict";u.views&&(u.views.tags({validation:{init:function(){this.childValidates=[],null!=this.tagCtx.props.initialValue&&(this.isValid=this.tagCtx.props.initialValue)},validate:function(){for(var e=this.childValidates.length,t=!0;e--&&!1!==t;)t=this.childValidates[e].validate();return t},clearMessage:function(){for(var e=this.childValidates.length;e--;)this.childValidates[e].clearMessage()},refreshValidates:function(){for(var e=this.childValidates.length;e--;)this.childValidates[e].refresh()},addChild:function(e){this.childValidates.push(e)},removeChild:function(e){for(var t=this.childValidates.length;t--;)if(this.childValidates[t]===e){this.childValidates.splice(t,1),this.updateIsValid();break}},onChildValidate:function(){this.updateIsValid()},updateIsValid:function(){for(var e=!0,t=this.childValidates.length;t--;)if(!this.childValidates[t].isValid){e=!1;break}u.observable(this).setProperty("isValid",e)},showDictionaryErrors:function(n,l){Object.keys(n).forEach(function(e){var t=(l||"")+e,i=document.querySelector('[for="'+t+'"]:not(label)'),a=document.querySelector('[name="'+t+'"]');null==a||a.classList.add("input-validation-error"),null!=i.textContent?i.textContent=n[e]:i.innerText=n[e],i.classList.add("field-validation-error")}),u.observable(this).setProperty("isValid",!1)},isValid:!0,dataBoundOnly:!0},validate:{baseTag:"radiogroup",linkedElement:"select,textarea,input",boundProps:["preventInvalidData"],init:function(e,t){var i=this;(i.radiogroup=e.props.radiogroup)?i.baseApply(arguments):i.inline&&!e.content&&(i.template="<input/>"),i.validationGroup=this.parents.validation,i.validationGroup&&i.validationGroup.addChild(this)},render:function(e){var t,i=this.tagCtx;if(this.inline)return t=i.render(i.view,!0),t=this.radiogroup?"<div>"+t+"</div>":t},onBind:function(e,t){var i,a=this,n=a.linkedElem&&a.linkedElem[0];(i=a.childTags()[0])&&(a.targetTag=i,n&&u.view(n).tag===i&&(a.linkedElem=void 0),i.onBeforeUpdateVal=function(e,t){return a.onBeforeUpdateVal.call(a,e,t)}),a.radiogroup&&this.baseApply(arguments)},onAfterLink:function(e,t){var i=this,a=i.targetTag,n=e.props,l=i.cvtArgs()[0];void 0!==n.preventInvalidData?i.preventInvalidData=n.preventInvalidData:i.parents.validation&&(i.preventInvalidData=i.parents.validation.tagCtx.props.preventInvalidData),i.messageElem&&i.messageElem.parentNode||(i.radiogroup?(i.messageElem=i.inline?e.contents("div"):u(t.elem),i.messageElem.addClass("radiogroup")):(!i.inline&&(a=u.views.sub._glt(t.elem)[0])&&(i.targetTag=a),i.messageElem=a&&(a.displayElem||a.linkedElem||a.mainElem)||i.displayElem||i.linkedElem),i.messageElem.addClass("val-msg")),i.label&&i.label.parentNode||(n.errorPlacement?i.label=u(n.errorPlacement)[0]:i.label=u('<label class="error"></label><br/>').insertAfter(i.messageElem)[0]),n.preventValidation||i.validate(l)},onUpdate:function(e,t,i){return this.clearMessage(),!1},onBeforeUpdateVal:function(e,t){if(this.preventInvalidData)return this.validate(t.value),this.isValid},onDispose:function(){this.validationGroup&&this.validationGroup.removeChild(this)},validate:function(e){var t,i,a,n,l=this,s=l.tagCtx.props,r=l.linkedElem;for(var d in void 0===e&&(l._.radio&&r&&(r=r.find("input:checked")),e="",(i=r&&r[0])?e="checkbox"===i.type?i.checked:i.value:l.targetTag&&(e=l.targetTag.bndArgs()[0]),e=e||""),l.clearMessage(),this.isValid=!0,this.validators){n=s[d];var o=s&&s.preventValidation||!1;if(void 0!==n&&!o&&this.validators[d].test(n,e)){a=d,this.isValid=!1;break}}return this.isValid||(t=s["msg_"+a]||this.validators[a].message,u.isFunction(t)&&(t=t(n,e)),t=t.replace(/%cond%/g,n).replace(/%val%/g,e),void 0!==l.label.textContent?l.label.textContent=t:l.label.innerText=t,l.messageElem.addClass("input-validation-error"),l.label.classList.remove("field-validation-valid"),l.label.classList.add("field-validation-error")),this.validationGroup&&this.validationGroup.onChildValidate(),this.isValid},validators:function(e){for(var t in e)this.validators[t]=e[t]},clearMessage:function(){var e=this.label;this.messageElem&&(this.messageElem.removeClass("input-validation-error"),e.classList.remove("field-validation-error"),void 0!==e.textContent?e.textContent="":e.innerText="")}}}),u.views.tags.validate.validators({required:{message:"Please provide a value",test:function(e,t){return e&&""===t}},equal:{message:"Value must be %cond%",test:function(e,t){return t!==""+e}},checked:{message:function(e,t){return"Must be "+(e?"checked":"unchecked")},test:function(e,t){return(t&&"false"!==t)!==e}},min:{message:"Minimum: %cond%",test:function(e,t){return t<e}},max:{message:"Maximum:  %cond%",test:function(e,t){return e<t}},maxLength:{message:"Maximum length: %cond%",test:function(e,t){return t.length>e}},minLength:{message:"Minimum length: %cond%",test:function(e,t){return t.length<e}},regex:{message:"Invalid string format",test:function(e,t){return!(e.test?e:new RegExp(e)).test(t)}}}))}(this.jQuery);